function o(e){return Array.isArray(e)?e.map(o):e&&typeof e=="object"&&e.constructor===Object?Object.keys(e).sort().reduce((t,s)=>(t[s]=o(e[s]),t),{}):e}self.addEventListener("message",e=>{const{type:t,payload:s,id:c}=e.data;let n;try{switch(t){case"json-parse":{const{text:r,sortKeys:y=!1}=s;let a=JSON.parse(r);y&&(a=o(a)),n={type:"json-parse-result",payload:{parsed:a},id:c};break}case"json-stringify":{const{data:r,minify:y=!1,sortKeys:a=!1}=s;let f=r;a&&(f=o(r)),n={type:"json-stringify-result",payload:{formatted:y?JSON.stringify(f):JSON.stringify(f,null,2)},id:c};break}default:throw new Error(`Unknown task type: ${t}`)}}catch(r){n={type:"error",payload:null,id:c,error:r instanceof Error?r.message:"Unknown error occurred"}}self.postMessage(n)});
